# Telegram-–±–æ—Ç –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ —Å YouTube üöÄ

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –≤–∏–¥–µ–æ —Å YouTube –≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º –∫–∞—á–µ—Å—Ç–≤–µ (–¥–æ 4K/2160p) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–º–µ—Ä–æ–º –¥–æ 2 –ì–ë, –æ–±—Ö–æ–¥—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram Bot API –≤ 50 –ú–ë.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:
1. **Python-–±–æ—Ç** (aiogram + yt-dlp) ‚Äî –ª–æ–≥–∏–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
2. **Local Telegram Bot API Server** ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞ Telegram, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–û–±—Ö–æ–¥ –ª–∏–º–∏—Ç–∞ –≤ 50 –ú–ë:** –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–æ 2 –ì–ë (–º–∞–∫—Å–∏–º—É–º –¥–ª—è Telegram).
- ‚úÖ **–í—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π: 360p, 720p, 1080p, 1440p (2K), 2160p (4K).
- ‚úÖ **–£–º–Ω–∞—è —Å–∫–ª–µ–π–∫–∞:** –°–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫–∏ —Ä–∞–∑–¥–µ–ª—å–Ω–æ, –∑–∞—Ç–µ–º —Å–∫–ª–µ–∏–≤–∞–µ—Ç –∏—Ö –≤ MP4 –±–µ–∑ –ø–æ—Ç–µ—Ä—å.
- ‚úÖ **–ö—Ä–∞—Å–æ—Ç–∞:** –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ–±–ª–æ–∂–∫–∏ –≤–∏–¥–µ–æ, –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ñ–∞–π–ª–∞.
- ‚úÖ **Production-Ready:** –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä–∞ —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ (HTTPS) –∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º –¥–æ–º–µ–Ω–æ–º.

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (API Server)

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **Docker Compose** –¥–ª—è –ø–æ–¥–Ω—è—Ç–∏—è —Å–≤—è–∑–∫–∏: API Server + Nginx (–ü—Ä–æ–∫—Å–∏) + Certbot (SSL).

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –°–µ—Ä–≤–µ—Ä —Å Linux (Ubuntu/Debian).
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Docker –∏ Docker Compose.
- –°–≤–æ–π –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `api.mydomain.com`), –ê-–∑–∞–ø–∏—Å—å –∫–æ—Ç–æ—Ä–æ–≥–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞.

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

1.  –í —Ñ–∞–π–ª–µ `docker-compose.yml` –≤ —Å–µ–∫—Ü–∏–∏ `telegram-bot-api` —É–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ (–ø–æ–ª—É—á–∏—Ç—å –Ω–∞ [my.telegram.org](https://my.telegram.org)):
    ```yaml
    - TELEGRAM_API_ID=123456
    - TELEGRAM_API_HASH=–≤–∞—à_—Ö–µ—à
    ```

2.  –í —Ñ–∞–π–ª–µ `nginx_conf/nginx.conf` –∑–∞–º–µ–Ω–∏—Ç–µ –≤–µ–∑–¥–µ `api.yourdomain.com` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω.

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)

–¢–∞–∫ –∫–∞–∫ —É –Ω–∞—Å –µ—â–µ –Ω–µ—Ç —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, Nginx –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –¥–ª—è 443 –ø–æ—Ä—Ç–∞.

1.  **–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** –≤ `nginx_conf/nginx.conf` –≤—Å—é —Å–µ–∫—Ü–∏—é `server { listen 443 ... }`. –û—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –±–ª–æ–∫ —Å 80 –ø–æ—Ä—Ç–æ–º.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx:
    ```bash
    docker-compose up -d nginx
    ```
3.  –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ email –∏ –¥–æ–º–µ–Ω):
    ```bash
    docker-compose run --rm certbot certonly --webroot --webroot-path /var/www/certbot -d api.yourdomain.com --email your@email.com --agree-tos --no-eff-email
    ```
4.  **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** —Å–µ–∫—Ü–∏—é 443 –ø–æ—Ä—Ç–∞ –≤ `nginx_conf/nginx.conf`.
5.  –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
    ```bash
    docker-compose restart nginx
    docker-compose up -d telegram-bot-api
    ```

–¢–µ–ø–µ—Ä—å –≤–∞—à –ª–∏—á–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `https://api.yourdomain.com`.

---

## ü§ñ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –ë–æ—Ç–∞

### –®–∞–≥ 1: Python-–æ–∫—Ä—É–∂–µ–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–µ–º –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º venv
python3 -m venv venv
source venv/bin/activate

# –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –®–∞–≥ 2: –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã

–í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞:

1.  **`token.txt`** ‚Äî –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –æ—Ç @BotFather (–≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É).
2.  **`cookies.txt`** ‚Äî –§–∞–π–ª Cookies –≤ —Ñ–æ—Ä–º–∞—Ç–µ Netscape.
    - *–ó–∞—á–µ–º?* YouTube –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–æ–≤ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
    - *–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å:* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ "Cookie-Editor" -> –∑–∞–π–¥–∏—Ç–µ –Ω–∞ youtube.com (–∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã–º) -> Export -> Export as Netscape -> –≤—Å—Ç–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª.

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `bot.py`

–û—Ç–∫—Ä–æ–π—Ç–µ `bot.py` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É API.

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –í—Å—ë –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–õ–æ–∫–∞–ª—å–Ω–æ)**
–ï—Å–ª–∏ –±–æ—Ç –∏ Docker –∫—Ä—É—Ç—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ, –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é:
```python
local_server = TelegramAPIServer.from_base("http://127.0.0.1:8081")
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ë–æ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ –∏–ª–∏ –Ω—É–∂–µ–Ω HTTPS (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
–ï—Å–ª–∏ –≤—ã –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –¥–æ–º–µ–Ω –∏ SSL (—Å–º. –≤—ã—à–µ):
```python
local_server = TelegramAPIServer.from_base("https://api.yourdomain.com")
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫

```bash
python3 bot.py
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ bot.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config_reader.py        # –ß—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îú‚îÄ‚îÄ docker-compose.yml      # –ö–æ–Ω—Ñ–∏–≥ Docker –¥–ª—è API —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ handlers/               # –õ–æ–≥–∏–∫–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ start.py            # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îú‚îÄ‚îÄ video_selection.py  # –ü–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ –∏ –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ   ‚îî‚îÄ‚îÄ download.py         # –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ common.py           # –£—Ç–∏–ª–∏—Ç—ã (–ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îú‚îÄ‚îÄ nginx_conf/             # –ö–æ–Ω—Ñ–∏–≥–∏ Nginx
‚îú‚îÄ‚îÄ cookies.txt             # –í–∞—à–∏ –∫—É–∫–∏ YouTube
‚îú‚îÄ‚îÄ token.txt               # –¢–æ–∫–µ–Ω –±–æ—Ç–∞
‚îî‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```